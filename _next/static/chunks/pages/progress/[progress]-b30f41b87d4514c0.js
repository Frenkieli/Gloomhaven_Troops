(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{2186:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/progress/[progress]",function(){return n(4657)}])},4657:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return u},default:function(){return g}});var o=n(5893),r=n(7294),a=n(9008),i=n(8148),s=n(8623),l=n(4819),c=n(9762),d=n(7427),m=n(7041),h=n.n(m),f=n(4298),u=!0;function g(e){var t=e.progressData,n=(0,r.useRef)(),m=(0,r.useRef)(),u=(0,r.useRef)(),g=(0,r.useState)(0),x=g[0],p=g[1];return(0,r.useEffect)((function(){var e=new l.U(document.getElementById("gloomhaven"),p);console.log(t),e.init(),e.initTool();var n=new c.C(e);n.setTopography("construct"),new d.W(e,n).comeOut(t.mvp,t.member)}),[]),(0,r.useEffect)((function(){100===x&&(console.log("100"),m.current.classList.add("opacity-0"),u.current.classList.add("cursor-pointer"),u.current.classList.remove("opacity-0"))}),[x]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.default,{children:[(0,o.jsx)("link",{rel:"shortcut icon",href:i.or+"/images/icon.jpg"}),(0,o.jsx)("link",{rel:"apple-touch-icon-precomposed",sizes:"192x192",href:i.or+"/images/icon.jpg"}),(0,o.jsxs)("title",{children:[t.name," \uff1a ",i.im]}),(0,o.jsx)("meta",{name:"author",content:i.Vb}),(0,o.jsx)("meta",{name:"copyright",content:i.ge}),(0,o.jsx)("meta",{name:"name",content:i.im}),(0,o.jsx)("meta",{name:"image",content:i.or+"/images/share.jpg"}),(0,o.jsx)("meta",{name:"description",content:i.JG}),(0,o.jsx)("meta",{property:"og:title",content:i.im}),(0,o.jsx)("meta",{property:"og:type",content:"article"}),(0,o.jsx)("meta",{property:"article:section",content:"table of contents"}),(0,o.jsx)("meta",{property:"og:url",content:"https://www.facebook.com/lyumage"}),(0,o.jsx)("meta",{property:"og:image",content:i.or+"/images/share.jpg"}),(0,o.jsx)("meta",{property:"og:description",content:i.JG}),(0,o.jsx)("meta",{property:"og:site_name",content:i.im}),(0,o.jsx)("meta",{property:"fb:app_id",content:i.GR})]}),(0,o.jsx)(f.default,{src:"../lib/html2canvas.js"}),(0,o.jsx)(s.Z,{}),(0,o.jsx)("div",{ref:n,className:"\n        uppercase tracking-widest md:tracking-one ".concat(h()["font-DotGothic16"]," \n        z-10 fixed top-0 right-0 bottom-0 left-0 \n        cursor-default select-none"),children:(0,o.jsxs)("div",{className:" h-full w-full flex flex-col justify-center items-center text-white bg-black ",children:[(0,o.jsx)("h1",{className:"text-4xl md:text-7xl font-black leading-9 md:leading-normal",children:"gloomhaven"}),(0,o.jsx)("h3",{className:"text-xl md:text-3xl font-medium leading-9 md:leading-normal",children:i.im}),(0,o.jsx)("h2",{className:"text-3xl md:text-6xl font-black leading-9 md:leading-normal",children:t.name}),(0,o.jsxs)("div",{ref:m,className:" fixed bottom-20 w-1/2 h-6 border border-solid border-white rounded-2xl overflow-hidden duration-300 ",children:[(0,o.jsx)("span",{className:" tracking-widest absolute left-1/2 top-1/2 translate-x-center translate-y-center text-white mix-blend-difference ",children:Math.floor(x)+"%"}),(0,o.jsx)("div",{className:" h-full bg-white rounded-2xl duration-100 ",style:{width:x+"%"}})]}),(0,o.jsx)("div",{ref:u,className:" duration-300 opacity-0 fixed bottom-20 overflow-hidden text-white text-6xl md:text-9xl ",onClick:function(){100===x&&(console.log("start"),html2canvas(n.current,{removeContainer:!0,useCORS:!0,scrollY:0,scrollX:0,dpi:96,onrendered:function(){console.log("\u5b8c\u6210")}}).then((function(e){var t=document.createElement("img");t.src=e.toDataURL(),t.onload=function(){var e=document.createElement("canvas"),o=e.getContext("2d");e.width=t.width,e.height=t.height,o.drawImage(t,0,0,window.innerWidth,window.innerHeight),e.className="z-10 fixed top-0 left-0",document.body.appendChild(e),n.current.remove(),function(e){for(var t=e.getContext("2d"),n=Math.ceil(e.width/10),o=Math.ceil(e.height/10),r=[],a=0;a<n;a++){r[a]=[];for(var i=0;i<o;i++)r[a].push([10*a,10*i,10,10])}var s=Math.floor(r.length*r[0].length/100),l=setInterval((function(){for(var n=0;n<s;n++){var o=Math.floor(Math.random()*r.length),a=Math.floor(Math.random()*r[o].length);if(t.beginPath(),t.globalCompositeOperation="destination-out",t.fillStyle="#fa0",t.rect(r[o][a][0],r[o][a][1],r[o][a][2],r[o][a][3]),t.fill(),t.closePath(),r[o].splice(a,1),0===r[o].length&&(r.splice(o,1),console.log("\u6d88\u5931\u4e00\u500b")),0===r.length){e.remove(),clearInterval(l),console.log("\u95dc\u9589");break}}}),2)}(e)}})))},children:"START"})]})}),(0,o.jsx)("div",{className:"\n          bg-cover bg-center\n          ".concat(h()["bg-pergament"],"\n        "),children:(0,o.jsx)("canvas",{id:"gloomhaven"})})]})}}},function(e){e.O(0,[737,322,753,774,888,179],(function(){return t=2186,e(e.s=t);var t}));var t=e.O();_N_E=t}]);